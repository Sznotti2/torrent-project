<mat-form-field appearance="outline">
	<mat-label>Filter</mat-label>
	<mat-icon matSuffix>search</mat-icon>
	<input matInput matRipple (keyup)="applyFilter($event)" placeholder="Ex. Mia" #input>
</mat-form-field>

<div class="table-container" tabindex="0">
	<table mat-table [dataSource]="dataSource" matSort multiTemplateDataRows>

		<!-- dynamically displays the columns from columnsToDisplay -->
		@for (column of columnsToDisplay; track column) {
		<ng-container matColumnDef="{{column}}">
			<th mat-header-cell *matHeaderCellDef mat-sort-header sortActionDescription="Sort by {{column}}"> {{column}}
			</th>
			<td mat-cell *matCellDef="let element"> {{element[column]}} </td>
		</ng-container>
		}

		<ng-container matColumnDef="expand">
			<th mat-header-cell *matHeaderCellDef aria-label="row actions">&nbsp;</th>
			<td mat-cell *matCellDef="let element">
				<!-- <button mat-icon-button aria-label="expand row" (click)="(expandedElement = expandedElement === element ? null : element); $event.stopPropagation()">
				@if (expandedElement === element) {
					<mat-icon>keyboard_arrow_up</mat-icon>
				} @else {
					<mat-icon>keyboard_arrow_down</mat-icon>
				}
				</button> -->
			</td>
		</ng-container>

		<!-- Expanded Content Column - The detail row is made up of this one column that spans across all columns -->
		<ng-container matColumnDef="expandedDetail">
			<td mat-cell *matCellDef="let element" [attr.colspan]="columnsToDisplayWithExpand.length">
				<div class="detail"
					[@detailExpand]="element == expandedElement ? 'expanded' : 'collapsed'">
					<!-- <mat-action-row>
					<button mat-flat-button color="warn" (click)="download()">Previous</button>
					<button mat-flat-button color="primary" (click)="download()">Next</button>
					</mat-action-row> -->

					<!-- <div class="diagram">
						<div class="position">{{ element.id }}</div>
						<div class="symbol">{{ element.title_long }}</div>
						<div class="name">{{ element.year }}</div>
						<div class="weight">{{ element.rating }}</div>
					</div> -->
					<div class="description">
						<pre class="json">{{ element | json }}</pre>
						<!-- {{ element.summary }}
						<span class="description-attribution"> -- Expanded </span> -->
					</div>
				</div>
			</td>
		</ng-container>

		<tr mat-header-row *matHeaderRowDef="columnsToDisplayWithExpand; sticky: true"></tr>
		<tr mat-row *matRowDef="let element; columns: columnsToDisplayWithExpand;" class="row"
			[class.example-expanded-row]="expandedElement === element"
			(click)="expandedElement = expandedElement === element ? null : element">
		</tr>
		<tr mat-row *matRowDef="let row; columns: ['expandedDetail']" class="example-detail-row"></tr>

		<!-- Row shown when there is no matching data. -->
		<tr class="mat-row" *matNoDataRow>
			<td class="mat-cell" colspan="4">No data matching the filter "{{input.value}}"</td>
		</tr>
	</table>
</div>

<mat-paginator [pageSizeOptions]="[10, 25, 100]" aria-label="Select page of users"></mat-paginator>